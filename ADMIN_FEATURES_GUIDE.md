# 管理员功能使用指南

## 概述

管理员面板提供了完整的用户管理和系统监控功能，包括用户信息查看、聊天记录管理、用户封禁/解封等。

## 功能列表

### 1. 系统统计
- **总用户数**: 显示系统中的所有用户数量
- **今日新增用户**: 当天新注册的用户数量
- **总消息数**: 系统中的所有聊天消息数量
- **今日消息数**: 当天发送的消息数量
- **Token使用量**: 系统消耗的AI Token总量
- **今日Token使用量**: 当天消耗的Token数量
- **封禁用户数**: 当前被封禁的用户数量
- **实名认证用户数**: 已完成实名认证的用户数量

### 2. 用户管理
- **用户列表**: 显示所有用户的基本信息
- **搜索功能**: 支持按用户名、昵称、邮箱搜索
- **用户状态**: 显示用户是否被封禁
- **实名认证状态**: 显示用户是否完成实名认证
- **注册时间**: 显示用户注册的具体时间

### 3. 用户详情页面
- **基本信息**: 用户ID、用户名、昵称、邮箱
- **账户状态**: 实名认证状态、封禁状态
- **封禁信息**: 如果用户被封禁，显示封禁原因
- **注册时间**: 用户注册的具体时间

### 4. 聊天记录管理
- **聊天历史**: 查看用户的所有聊天记录
- **分页显示**: 支持分页浏览大量聊天记录
- **搜索功能**: 在聊天记录中搜索特定内容
- **详细信息**: 显示每条记录的智能体、会话ID、时间、Token使用量
- **消息内容**: 显示用户消息和AI回复的完整内容

### 5. 用户操作
- **封禁用户**: 可以封禁违规用户，需要提供封禁原因
- **解封用户**: 可以解除用户的封禁状态
- **查看详情**: 跳转到用户详情页面查看完整信息

## 使用步骤

### 访问管理员面板
1. 使用管理员账户登录系统
2. 点击导航栏中的"管理"链接
3. 进入管理员面板

### 查看用户信息
1. 在用户列表中浏览所有用户
2. 使用搜索框快速找到特定用户
3. 点击"查看详情"按钮查看用户完整信息

### 查看用户聊天记录
1. 在用户详情页面中查看聊天记录部分
2. 使用分页控件浏览不同页面的记录
3. 使用搜索框在聊天记录中搜索特定内容
4. 点击"刷新"按钮更新数据

### 封禁/解封用户
1. 在用户列表中找到目标用户
2. 点击"封禁"按钮（如果用户未被封禁）
3. 在弹出的对话框中输入封禁原因
4. 点击"解封"按钮（如果用户已被封禁）
5. 确认解封操作

## 权限说明

### 超级管理员权限
- 查看所有用户
- 查看用户聊天历史
- 封禁/解封用户
- 查看系统统计
- 管理智能体
- 管理其他管理员

### 内容审核员权限
- 查看所有用户
- 查看用户聊天历史
- 封禁/解封用户

## 注意事项

1. **权限控制**: 只有管理员账户才能访问管理面板
2. **操作记录**: 所有管理操作都会被记录在操作日志中
3. **数据安全**: 聊天记录包含敏感信息，请谨慎处理
4. **封禁操作**: 封禁用户是重要操作，请确保有充分理由
5. **数据刷新**: 页面数据可能需要手动刷新以获取最新信息

## 故障排除

### 无法访问管理面板
- 检查当前用户是否为管理员
- 确认管理员配置文件中包含当前用户
- 检查用户权限是否正确设置

### 无法查看用户聊天记录
- 确认用户确实有聊天记录
- 检查数据库连接是否正常
- 确认有查看聊天历史的权限

### 封禁/解封操作失败
- 检查目标用户是否存在
- 确认有相应的操作权限
- 检查数据库连接状态

## 技术支持

如果遇到问题，请检查：
1. 后端服务是否正常运行
2. 数据库连接是否正常
3. 管理员配置文件是否正确
4. 用户权限是否正确设置

## 测试命令

运行管理功能测试：
```bash
npm run test-admin
```

这将测试所有管理功能是否正常工作。 